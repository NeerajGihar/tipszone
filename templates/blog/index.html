{% extends 'base.html' %}

{% block title %}Home{% endblock title%}
{% block homeactive %}active{% endblock homeactive %}
{% block CSS %}

{% endblock CSS %}

{% block body%}
{% load humanize %}
<div class="bg-light">
{% if user.is_authenticated %}
<div class="container bg-dark rounded  shadow">
    <div class="jumbotron  my-3 p-3 text-white rounded bg-dark" style="font-family:Noto Color Emoji;">
      <h1 class="display-4 font-italic">Welcome to TipsZone! {{request.user}}</h1>
      <p class="lead">This is a blogging site that give you, featured content or information about skill inhencement and earning.</p>
      <hr class="my-4">
      <p>Explore Our blogs, and we are trying to give you all the necessary informations to earn money.</p>
      </div>
    </div>
    {% else %}
    <div class="container bg-dark rounded  shadow">
        <div class="jumbotron my-3 p-3 text-white rounded bg-dark" style="font-family:Noto Color Emoji;">
          <h1 class="display-4 font-italic">Welcome to TipsZone!</h1>
          <p class="lead">This is a blogging site that give you, featured content or information about skill inhencement and earning.</p>
          <hr class="my-4">
          <p>Explore Our blogs, and we are trying to give you all the necessary informations to earn money.</p>
         <a href="#exblog"><button class="btn btn-primary mr-2">
            Explore Blogs
          </button></a>
          </div>
        </div>
        {% endif %}

    <div class="container my-3 shadow pt-2" id="exblog">
        <h2 style="font-family:Noto Color Emoji; margin-top:5px; font-weight:bold;">Latest blogs by TipsZone</h2><hr>
        {% for post in allPosts  %}
    <div class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 my-4 position-relative ">
        <div class="col-auto d-none d-lg-block">
            <img src="/media/{{post.thumbnail}}" class="bd-placeholder-img" width="250" height="250" aria-label="Placeholder: Thumbnail">
                    <title>Placeholder</title></img>
            </svg>
        </div>
        <div class="col p-4 d-flex flex-column position-static" style="">
            <strong class="d-inline-block mb-2 text-primary">Article  by {{post.author}} <span class="badge badge-secondary ">{{post.timestamp| naturaltime}}</span></strong>
            <h3 class="mb-0"><a class="text-dark" href="/blog/{{post.slug}}">{{post.title}}</a></h3>
            <div class="mb-1 text-muted">{{post.datetime}}</div>
            <p class="card-text mb-auto"><div class="preview">{{post.content|safe| truncatechars:250}}</div></p>
            <div class="my-2">
            	<a href="/blog/{{post.slug}}" role="button" class="btn btn-primary">Continue reading</a>
            </div>
            
        </div>
        
        </div>

        {% endfor %}
        </div>
    </div>
{% endblock body %}
{% block JS %}
<script>
    let previews=document.getElementsByClassName('preview');
    Array.from(previews).forEach((element)=>{
        element.innerHTML=element.innerText;
    })</script>
{% endblock JS %}